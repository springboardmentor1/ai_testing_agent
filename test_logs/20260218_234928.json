{
  "test_id": "20260218_234928",
  "timestamp": "2026-02-18T23:49:28.328360",
  "instruction": "go to instagram check if logged in",
  "parsed_steps": [
    {
      "action": "OPEN_BROWSER",
      "url": "instagram.com"
    },
    {
      "action": "CHECK_LOGIN",
      "expected": false
    }
  ],
  "browser_state": {
    "browser_open": true,
    "current_url": "https://instagram.com",
    "logged_in": false
  },
  "generated_code": "\"\"\"\nAuto-generated Playwright test with adaptive selectors\nBrowser: VISIBLE MODE for demonstration\n\"\"\"\n\nfrom playwright.sync_api import sync_playwright, expect, TimeoutError as PWTimeoutError\nimport sys\nimport time\n\n\ndef find_element_adaptive(page, selectors, element_name=\"element\"):\n    \"\"\"Try multiple selectors until one works\"\"\"\n    for selector in selectors:\n        try:\n            elem = page.locator(selector).first\n            elem.wait_for(state=\"visible\", timeout=5000)\n            print(f\"  ‚úÖ Found {element_name} using: {selector}\")\n            return elem\n        except:\n            continue\n    raise Exception(f\"Could not find {element_name} with any selector\")\n\n\ndef handle_cookie_consent(page):\n    \"\"\"Handle common cookie consent popups\"\"\"\n    consent_selectors = [\n        \"button:has-text(\\\"Accept all\\\")\",\n        \"button:has-text(\\\"Accept\\\")\",\n        \"button:has-text(\\\"I agree\\\")\",\n        \"[id*=\\\"accept\\\"]\",\n        \"[class*=\\\"accept\\\"]\"\n    ]\n    for selector in consent_selectors:\n        try:\n            page.locator(selector).click(timeout=3000)\n            print(\"  üç™ Accepted cookies\")\n            return True\n        except:\n            continue\n    return False\n\n\ndef run_test():\n    \"\"\"Execute the test with error handling\"\"\"\n    print(\"üé≠ Starting test execution in VISIBLE MODE...\")\n    \n    with sync_playwright() as p:\n        # Launch VISIBLE browser with slow motion\n        browser = p.chromium.launch(\n            headless=False,  # Visible for demo\n            slow_mo=900       # Slow motion effect\n        )\n        context = browser.new_context(\n            viewport={\"width\": 1280, \"height\": 720},\n            user_agent=\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\"\n        )\n        page = context.new_page()\n        \n        try:\n            print(\"\\n‚û°Ô∏è  Step 1: OPEN_BROWSER\")\n            try:\n                print(\"  üåê Opening https://instagram.com...\")\n                page.goto(\"https://instagram.com\", wait_until=\"domcontentloaded\", timeout=30000)\n                page.wait_for_load_state(\"domcontentloaded\")\n                time.sleep(2)  # Let page stabilize\n                \n                # Handle cookie consent\n                handle_cookie_consent(page)\n                \n                print(\"  ‚úÖ Page loaded\")\n            except Exception as step_error:\n                print(f\"  ‚ö†Ô∏è  Step 1 error: {step_error}\")\n                page.screenshot(path=\"screenshots/error_step_{i}.png\")\n                raise\n            \n            print(\"\\n‚û°Ô∏è  Step 2: CHECK_LOGIN\")\n            try:\n                print(\"  üîê Checking login status (expected: False)\")\n                logout_selectors = [\n                    \"a[href*=\\\"logout\\\"]\",\n                    \"button:has-text(\\\"Sign Out\\\")\",\n                    \"button:has-text(\\\"Log Out\\\")\",\n                    \"[data-testid*=\\\"user\\\"]\",\n                    \".user-menu\"\n                ]\n                is_logged_in = False\n                for selector in logout_selectors:\n                    try:\n                        page.locator(selector).wait_for(state=\"visible\", timeout=3000)\n                        is_logged_in = True\n                        print(f\"  ‚úÖ Login detected via: {selector}\")\n                        break\n                    except:\n                        continue\n                assert not is_logged_in, \"Expected to be logged out\"\n                print(\"  ‚úÖ Login check passed\")\n            except Exception as step_error:\n                print(f\"  ‚ö†Ô∏è  Step 2 error: {step_error}\")\n                page.screenshot(path=\"screenshots/error_step_{i}.png\")\n                raise\n            \n            print(\"\\n‚úÖ All steps PASSED!\")\n            print(\"üõë Browser stays open for 20 seconds for inspection\")\n            time.sleep(20)\n            browser.close()\n            return 0\n            \n        except AssertionError as e:\n            print(f\"\\n‚ùå Assertion failed: {e}\")\n            page.screenshot(path=\"screenshots/assertion_failed.png\")\n            time.sleep(20)\n            browser.close()\n            return 1\n            \n        except PWTimeoutError as e:\n            print(f\"\\n‚è±Ô∏è  Timeout: {e}\")\n            page.screenshot(path=\"screenshots/timeout_error.png\")\n            time.sleep(20)\n            browser.close()\n            return 1\n            \n        except Exception as e:\n            print(f\"\\n‚ùå Test FAILED: {e}\")\n            page.screenshot(path=\"screenshots/test_error.png\")\n            time.sleep(20)\n            browser.close()\n            return 1\n\n\nif __name__ == \"__main__\":\n    exit_code = run_test()\n    sys.exit(exit_code)\n",
  "code_file_path": "app/generated_tests\\test_20260218_234831.py",
  "execution": {
    "status": "passed",
    "passed": true,
    "duration_seconds": 0.0,
    "output": "Live output shown in terminal (visible mode)",
    "errors": "",
    "return_code": 0
  },
  "metadata": {
    "steps_count": 2,
    "login_checked": true,
    "screenshots_taken": 0
  }
}